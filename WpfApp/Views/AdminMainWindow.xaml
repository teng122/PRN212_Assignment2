<!-- File: Views/AdminMainWindow.xaml -->
<Window x:Class="HotelManager.Views.AdminMainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="FU Mini Hotel System - Admin Dashboard" 
        Height="600" Width="1000"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2196F3" Padding="15">
            <Grid>
                <TextBlock Text="FU Mini Hotel System - Administrator" 
                          FontSize="20" FontWeight="Bold" 
                          Foreground="White" VerticalAlignment="Center"/>
                <Button Content="Logout" Width="100" Height="35"
                       HorizontalAlignment="Right"
                       Click="btnLogout_Click"
                       Background="White" Foreground="#2196F3"/>
            </Grid>
        </Border>

        <!-- Tab Control -->
        <TabControl Grid.Row="1" Margin="10">
            <TabItem Header="Customer Management" FontSize="14" Padding="10,5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Search and Actions -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
                        <TextBox x:Name="txtSearchCustomer" Width="300" Height="35"
                                VerticalContentAlignment="Center"
                                Text="" Margin="0,0,10,0"/>
                        <Button Content="Search" Width="100" Height="35"
                               Background="#4CAF50" Foreground="White"
                               Click="btnSearchCustomer_Click"/>
                        <Button Content="Refresh" Width="100" Height="35"
                               Background="#FF9800" Foreground="White"
                               Click="btnRefreshCustomer_Click"/>
                        <Button Content="Add New" Width="100" Height="35"
                               Background="#2196F3" Foreground="White"
                               Click="btnAddCustomer_Click"/>
                        <Button Content="Update" Width="100" Height="35"
                               Background="#9C27B0" Foreground="White"
                               Click="btnUpdateCustomer_Click"/>
                        <Button Content="Delete" Width="100" Height="35"
                               Background="#F44336" Foreground="White"
                               Click="btnDeleteCustomer_Click"/>
                    </StackPanel>

                    <!-- Customer DataGrid -->
                    <DataGrid Grid.Row="1" x:Name="dgCustomers" Margin="10">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding CustomerID}" Width="50"/>
                            <DataGridTextColumn Header="Full Name" Binding="{Binding CustomerFullName}" Width="*"/>
                            <DataGridTextColumn Header="Telephone" Binding="{Binding Telephone}" Width="120"/>
                            <DataGridTextColumn Header="Email" Binding="{Binding EmailAddress}" Width="200"/>
                            <DataGridTextColumn Header="Birthday" Binding="{Binding CustomerBirthday, StringFormat=dd/MM/yyyy}" Width="100"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding CustomerStatus}" Width="80"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Room Management" FontSize="14" Padding="10,5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Search and Actions -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10">
                        <TextBox x:Name="txtSearchRoom" Width="300" Height="35"
                                VerticalContentAlignment="Center"
                                Text="" Margin="0,0,10,0"/>
                        <Button Content="Search" Width="100" Height="35"
                               Background="#4CAF50" Foreground="White"
                               Click="btnSearchRoom_Click"/>
                        <Button Content="Refresh" Width="100" Height="35"
                               Background="#FF9800" Foreground="White"
                               Click="btnRefreshRoom_Click"/>
                        <Button Content="Add New" Width="100" Height="35"
                               Background="#2196F3" Foreground="White"
                               Click="btnAddRoom_Click"/>
                        <Button Content="Update" Width="100" Height="35"
                               Background="#9C27B0" Foreground="White"
                               Click="btnUpdateRoom_Click"/>
                        <Button Content="Delete" Width="100" Height="35"
                               Background="#F44336" Foreground="White"
                               Click="btnDeleteRoom_Click"/>
                    </StackPanel>

                    <!-- Room DataGrid -->
                    <DataGrid Grid.Row="1" x:Name="dgRooms" Margin="10">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="ID" Binding="{Binding RoomID}" Width="50"/>
                            <DataGridTextColumn Header="Room Number" Binding="{Binding RoomNumber}" Width="100"/>
                            <DataGridTextColumn Header="Description" Binding="{Binding RoomDescription}" Width="*"/>
                            <DataGridTextColumn Header="Max Capacity" Binding="{Binding RoomMaxCapacity}" Width="100"/>
                            <DataGridTextColumn Header="Price/Day" Binding="{Binding RoomPricePerDate, StringFormat={}{0:N0} VND}" Width="120"/>
                            <DataGridTextColumn Header="Room Type" Binding="{Binding RoomType.RoomTypeName}" Width="100"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding RoomStatus}" Width="80"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- NEW REPORT TAB -->
            <TabItem Header="Booking Report" FontSize="14" Padding="10,5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Date Range Filter -->
                    <Border Grid.Row="0" Background="#F5F5F5" Padding="15" Margin="10">
                        <StackPanel>
                            <TextBlock Text="Select Date Range for Report" 
                                      FontSize="16" FontWeight="Bold" 
                                      Foreground="#2196F3" Margin="0,0,0,15"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="Start Date:" 
                                          VerticalAlignment="Center" Margin="0,0,10,0"
                                          FontWeight="SemiBold"/>
                                <DatePicker Grid.Column="1" x:Name="dpStartDate" 
                                           Height="35" Margin="0,0,20,0"/>

                                <TextBlock Grid.Column="2" Text="End Date:" 
                                          VerticalAlignment="Center" Margin="0,0,10,0"
                                          FontWeight="SemiBold"/>
                                <DatePicker Grid.Column="3" x:Name="dpEndDate" 
                                           Height="35" Margin="0,0,20,0"/>

                                <Button Grid.Column="4" Content="Generate Report" 
                                       Width="150" Height="35"
                                       Background="#4CAF50" Foreground="White"
                                       FontWeight="SemiBold"
                                       Click="btnGenerateReport_Click"
                                       HorizontalAlignment="Left"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Statistics Summary -->
                    <Border Grid.Row="1" Background="#E3F2FD" Padding="15" Margin="10,0,10,10">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Total Bookings" FontSize="12" Foreground="#666"/>
                                <TextBlock x:Name="txtTotalBookings" Text="0" 
                                          FontSize="24" FontWeight="Bold" 
                                          Foreground="#2196F3"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Total Revenue" FontSize="12" Foreground="#666"/>
                                <TextBlock x:Name="txtTotalRevenue" Text="0 VND" 
                                          FontSize="24" FontWeight="Bold" 
                                          Foreground="#4CAF50"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Average Booking Value" FontSize="12" Foreground="#666"/>
                                <TextBlock x:Name="txtAverageValue" Text="0 VND" 
                                          FontSize="24" FontWeight="Bold" 
                                          Foreground="#FF9800"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Report DataGrid -->
                    <DataGrid Grid.Row="2" x:Name="dgBookingReport" Margin="10"
                             AutoGenerateColumns="False">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Booking ID" Binding="{Binding BookingReservationID}" Width="100"/>
                            <DataGridTextColumn Header="Booking Date" Binding="{Binding BookingDate, StringFormat=dd/MM/yyyy}" Width="120"/>
                            <DataGridTextColumn Header="Customer Name" Binding="{Binding Customer.CustomerFullName}" Width="*"/>
                            <DataGridTextColumn Header="Customer Email" Binding="{Binding Customer.EmailAddress}" Width="200"/>
                            <DataGridTextColumn Header="Total Price" Binding="{Binding TotalPrice, StringFormat={}{0:N0} VND}" Width="150"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding BookingStatus}" Width="80"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>